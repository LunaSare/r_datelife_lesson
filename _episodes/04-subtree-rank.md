---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 04-subtree-rank.md in _episodes_rmd/
source: Rmd
title: "Getting an induced subtree of all taxa within a taxonomic rank"
teaching: 5
exercises: 5
questions:
- "How do I do this?"
objectives:
- "Learn sapply"
- "Use datelife"
keypoints:
- "..."
---

~~~
## Warning in collapse_singles(tr, show_progress): Dropping singleton nodes
## with labels: Rana clamitans ott515378, Rana sphenocephala ott61437, Rana
## aurora ott771201, Glandirana ott407917, Pelophylax cf ott7070897, Pterorana
## ott3618410, Hemimantis ott4133632, Microdiscopus ott4133623, Montorana
## ott4133633, Chiromantis vittatus ott389176, Beddomixalus ott4133641,
## Mercurana ott4133643, Buergeriinae ott223222, Maitsomantis ott678997,
## Boehmantis ott484429, laevigata group ott189959, bernhardi group ott189958,
## Wakea ott484449, Tsingymantis ott976861, Boophinae ott764200, Laliostoma
## ott1054409, Chrysopaa ott4133659, Ombrana ott4133654, Alcalinae ott5926144,
## Liurananinae ott5926192, Natalobatrachus ott532110, Cacosternum nanum
## ott676305, Microbatrachella ott751405, Poyntonia ott475120, Anhydrophryne
## ott113819, Ericabatrachus ott3618087, Nothophryne ott3618085, Phrynobatrachidae
## ott504589, Micrixalidae ott1081209, Lanzarana ott3618164, Odontobatrachidae
## ott5536254, Trichobatrachus ott780979, Pararthroleptis ott4133674, Hyperolius
## fusciventris ott85268, Tachycnemis (genus in Deuterostomia) ott750024,
## Morerella ott85260, Opisthothylax ott645881, Semnodactylus ott62328, Kassinula
## ott3619075, Chrysobatrachus ott3619077, Callixalus ott3619073, Chlorolius
## ott3619081, Arlequinus ott3619083, Tornierella ott4133669, Breviceps adspersus
## ott3618690, Spelaeophryne ott660153, Probreviceps macrodactylus ott111206,
## Balebreviceps ott348136, Hemisotidae ott165721, Genyophryne ott21522, Oninia
## ott789802, Siamophryne ott7070469, Melanobatrachus ott701612, Kalophrynidae
## ott977735, Phrynella (genus in Opisthokonta) ott401609, Mysticellus ott7070618,
## Dermatonotus ott186184, Gastrophryne olivacea ott565409, Dasypops ott513414,
## Relictivomer ott190096, Arcovomer ott844415, Anilany ott5926118, Madecassophryne
## ott3618941, Otophryninae ott404351, Synapturanus ott1039919, Phrynomerinae
## ott630304, Parhoplophryne ott3618937, Adelastinae ott5800508, Adelastes
## ott3618939, Caluella ott7666463, Corythomantis ott442032, Argenteohyla
## ott578372, Argenteohyla siemersi ott100569, Nyctimantis ott1087156, Itapotihyla
## ott257368, Hyla annectans ott655531, Anotheca ott59159, Diaglena ott3620134,
## Acris crepitans ott59141, Quilticohyla ott7070260, Rheohyla ott7070262,
## Nesorohyla ott7070190, Pachymedusa ott254792, Dryaderces ott7666055,
## Didynamipus ott152264, Barbarophryne ott5800473, Churamiti ott104959,
## Bufotes pewzowi ott1072351, Schismaderma ott506368, Strauchbufo ott6158681,
## Epidalea ott334615, Anaxyrus americanus ott889326, Sabahphrynus ott4133471,
## Laurentophryne ott3619734, Parapelophryne ott3619737, Pseudobufo ott3619739,
## Bufoides ott3619731, Metaphryniscus ott3619751, Blythophryne ott5926045,
## Ghatophryne ott7069948, Rentapia ott7069968, Silverstoneia nubicola ott638061,
## Hyloxalinae ott1096759, Lithodytes ott315881, Scythrophrys ott462991,
## Rupirana ott3620326, Phrynocerus ott3619498, Physalalemus ott6158772, Niedenia
## ott4133301, Allophrynidae ott57740, Macrogenioglottus ott726713, Insuetophrynus
## ott44381, Telmatobiinae ott777187, Hylorina ott440882, Limnomedusa ott914517,
## Chaltenobatrachus ott6158620, Chacophrys ott431943, Caudiverbera ott1068325,
## Geobatrachus ott3620197, Atopophrynus ott3620196, Ceuthomantinae ott277741,
## Megistolotis ott276283, Adelotus ott276281, Assa (genus in Opisthokonta)
## ott906692, Paracrinia ott989413, Metacrinia ott412471, Spicospina ott1039925,
## Rheobatrachidae ott918183, Hadromophryne ott971912, Atympanophrys ott542885,
## Vibrissaphora ott535112, Pelodytidae ott509554, Xenopodinae ott940173,
## Pseudhymenochirus ott140873, Rhinophrynidae ott459016, Rhinophrynus ott459015,
## Alytinae ott5334814, Discoglossus galganoi ott461369, Latonia ott4948216,
## Leiopelmatidae ott611960, Ascaphidae ott1013114, Pelodryadidae ott3620482,
## Ranoidea (genus in family Pelodryadidae) ott7666856, Iranodon ott7071233,
## Ranodon ott834698, Satobius ott5800418, Pachyhynobius ott1021854, Salamandrella
## ott1021847, Ambystomatidae ott984723, Dicamptodontidae ott60819, Laotriton
## ott4948201, Triturus marmoratus ott1041767, Triturus carnifex ott1041783,
## Ommatotriton ophryticus ott645229, Lissotriton helveticus ott9366, Lissotriton
## boscai ott830424, Tylototriton verrucosus ott932561, Tylototriton wenxianensis
## ott981376, Pleurodeles waltl ott566038, Lyciasalamandra fazilae ott1024882,
## Salamandrininae ott4948210, Pingia ott4132654, Isthmura bellii ott46162,
## Isthmura sierraoccidentalis ott98841, Parvimolge ott46159, Bradytriton
## ott798666, Nyctanolis ott224306, Haideotriton ott133635, Eurycea multiplicata
## ott839995, Stereochilus (genus in Opisthokonta) ott798664, Hemidactylium
## ott798658, Phaeognathus ott964128, Karsenia ott893551, Ensatina ott64118,
## Hydromantes imperialis ott675243, Atylodes (genus in Deuterostomia)
## ott693464, Hydromantoides ott4132648, Amphiumidae ott566022, Rhyacotritonidae
## ott459010, Sirenoidea ott336754, Praslinia ott80530, Sylvacaecilia ott3617918,
## Potamotyphlus ott7667119, Atretochoana ott3617929, Bdellophis ott4132629,
## Chikilidae ott4948197
~~~
{: .error}

### Get 
We have implemented a function in `datelife` to extract all taxa of a given rank. It is also sligthly faster.


~~~
amphibia_families <- datelife::get_ott_children(ott_ids = resolved_names["Amphibia",]$ott_id, ott_rank = "family")
~~~
{: .language-r}
Now, get the subtree of families only.

~~~
amphibia_families_subtree <- rotl::tol_induced_subtree(amphibia_families$Amphibia$ott_id)
~~~
{: .language-r}

~~~
amphibia_families_subtree
~~~
{: .language-r}


Phylogenetic tree with 61 tips and 58 internal nodes.

Tip labels:
	Ranidae_ott364560, Rhacophoridae_ott432783, Mantellidae_ott38969, Dicroglossidae_ott1081208, Ranixalidae_ott403946, Nyctibatrachidae_ott1081210, ...
Node labels:
	Amphibia ott544595, Batrachia ott471197, Anura ott991547, mrcaott114ott3129, mrcaott114ott37876, mrcaott114ott18818, ...

Rooted; no branch lengths.


~~~
ape::plot.phylo(amphibia_families_subtree, cex = 0.5)
~~~
{: .language-r}

<img src="../fig/rmd-unnamed-chunk-4-1.png" title="plot of chunk unnamed-chunk-4" alt="plot of chunk unnamed-chunk-4" width="612" style="display: block; margin: auto;" />
Awesome!
