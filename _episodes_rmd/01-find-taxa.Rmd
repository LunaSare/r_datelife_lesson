---
source: Rmd
title: "Finding your taxa in the Open Tree of Life Taxonomy"
teaching: 5
exercises: 5
questions:
- "What is the Open Tree Taxonomy?"
- "What are _ott ids_?"
- 'What is "tnrs"?'
objectives:
- "Get ott ids for some taxa."
- "Understand tnrs approximate matching and its sensitivity."
- "Try taxonomic contexts."
keypoints:
- "_ott ids_ are the Open Tree of Life Taxonomy handlers, they allow us to interact with the Open Tree synthetic tree."
- "taxonomic context is very important to find the correct _ott ids_ for our taxa."
- "You can go from a scientific name to an _ott id_ with tnrs matching."
- "But you can go from common name to scientific name format using other functions, to make your own workflow."
---
```{r, eval = TRUE, echo = FALSE}
source("../bin/chunk-options.R")
```

### The Open Tree Taxonomy and its identifiers


The Open Tree Taxonomy is

TNRS stands for Taxonomic NAme Resolution Service.

To get the _ott ids_ of your taxa we will use the function `tnrs_match_names()`. This will generate a "match_names" object.
```{r, eval = TRUE}
my_taxa <- c("amphibians", "canis", "felis", "delphinidae", "spheniscidae")
resolved_names <- rotl::tnrs_match_names(my_taxa)
class(resolved_names)
resolved_names
```

Are you familiar with the elements of a match_names object?


There are two ways to extract the _ott ids_ from a match_names object.

As a list, with the function `ott_id()`:

```{r, eval }
rotl::ott_id(resolved_names) # as a list
```

Or, as a vector:

```{r}
resolved_names$ott_id # as a vector
```

Most of the functions we will explore take an argument of _ott ids_ as a numeric vector, so I will usually prefer the second approach.

> **Hack**:
>
> To facilitate the use of _ott ids_ later, you can name the rows of your match_names object.
>
> ```{r}
> rownames(resolved_names) <- resolved_names$unique_name
> ```
>
> Like this, we can access _ott ids_ by their taxon name.
>
> ```{r}
> resolved_names$ott_id["Amphibia"]
> ```
{: .challenge}

Other elements of the match_names object can only be accessed as a vector, using the "$" symbol.


You can access the  elements of the match_names object with functions `flags()`


### Taxonomic contexts and updating a "match_names" object

Running a tnrs match can take some time, so if you just want to update a few elememnts from your match_names object, you can use the functions

Extra:

Going from common name to scientific name

{% include links.md %}
